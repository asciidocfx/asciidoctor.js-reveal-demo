case type
  when xref
    a(href=target) !{text}
  when ref
    a(id=target)
  when bibref
    a(id=target)
  default
    a(href=target,class=role,target=attr.window) !{text}
